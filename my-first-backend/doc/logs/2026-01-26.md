## [10:45] refactor(chat): 修改聊天接口入参结构

- **背景**: 根据需求，将聊天接口的入参从字符串类型的 `use_model`/`use_prompt` 改为整数类型的 `model_id`/`prompt_id`，并新增 `business_scenario` 字段。
- **变更点**:
  1. 修改了 `app/schemas/chat.py` 中的 `ChatRequest` 模型
     - 移除了 `use_model: str` 和 `use_prompt: str` 字段
     - 新增了 `model_id: int` 和 `prompt_id: int` 字段
     - 新增了 `business_scenario: str` 字段
     - 将 `conversation_id` 从 `Optional[str]` 改为必填的 `str`
     - 添加了 `model_config = ConfigDict(protected_namespaces=())` 以解决 Pydantic 警告
- **影响**: 
  - 这是破坏性变更，所有调用该接口的客户端都需要更新请求参数格式
  - 服务层代码无需修改，因为未直接使用被移除的字段
- **自检**: 
  - Schema 验证通过，新参数格式可正常解析
  - 已解决 Pydantic 的 `model_id` 命名空间警告
  - 类型检查通过

## [11:21] feat(chat): 增大流式返回数据量

- **背景**: 为了更真实地模拟流式响应，需要增加返回的数据量，包括思考内容和生成内容。
- **变更点**:
  1. 修改了 `app/services/chat.py` 中的 `chat_stream` 函数
     - 将思考内容（thinking_content）从 3 条增加到 10 条，包含更详细的分析过程
     - 将生成内容（content）从 3 条增加到 50+ 条，包含完整的结构化回答（问题分析、专业建议、注意事项、后续建议等）
     - 调整了 delta 事件的发送间隔，思考内容为 0.15 秒，生成内容为 0.1 秒
     - 更新了 final 事件的文本内容，包含完整的回答汇总
  2. 增强了模拟数据生成函数
     - `_generate_mock_digital_doctor_reasoning`: 诊断项从 1 个增加到 3 个，检查项从 1 个增加到 4 个，治疗项从 1 个增加到 3 个
     - `_generate_mock_evidence_conclusion`: 证据列表从 2 个增加到 7 个文件
     - `_generate_mock_personalized_analysis`: 记录列表从 2 条增加到 7 条，每条记录内容更详细
- **影响**: 
  - 流式响应时间更长，数据量更大，更接近真实场景
  - 客户端需要处理更多的 delta 事件
  - 不影响接口签名，向后兼容
- **自检**: 
  - 代码语法检查通过
  - 类型检查通过
  - 流式响应逻辑正确
